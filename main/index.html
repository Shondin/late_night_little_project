<html>
  <head>
    <meta charset="utf-8">
    <title>jquery.pep custom functions</title>

    <!-- Load local jQuery.  -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <!-- Load local lib and tests. -->
    <script src="./js/lib/jquery.pep.js"></script>
    <script src="./js/lib/handlebars.min.js"></script>

    <script type="text/javascript">
      $(document).ready(function(){
        var $timeline = $('#timeline');
        var $pep = $('.pep');
        var $matrix = $('#matrix');

        var now = new Date()
        var timestamp = Date.parse();
        var pep_width = $pep.outerWidth;
        var minutes_img_width = 10;
        var minutes = pep_width/minutes_img_width;

        var milk = minutes*60000; // minutes to milliseconds
        var start_time = timestamp - milk;

        //cur time
        for (var i =0; i<=minutes; i++){
            var id ="";

            if(i%5==0){
                id="id='"+parseInt(start_time+(i*60000))+"'";
            }

            $matrix.append("<div "+id+" class='col' style='width:"+minutes_img_width+"px'></div>");
        }

        $('.pep').pep({
              axis: 'x',
              constrainTo: [0, 3000, 0, -3000],
              initiate: function(ev, obj) {},
              start: function(ev, obj)    {},
              drag: function(ev, obj)     {},
              stop: function(ev, obj)     {},
              rest: function(ev, obj)     {}
        });
        var template = "<div class='card'>" +
                        "<div class='img'></div>"
                        "<div class='info'></div>"
                "</div>"
        var addMovieCard = function(timestamp){
            $('#'+timestamp).append(template)
        }

        addMovieCard("1440618788000")
      });
    </script>

    <style type="text/css">
       body{
            overflow:hidden;
            background-color:#111;
       }
      .pep{
            width: 6000px;
            height: 200px;
            color: white;
            opacity: 0.8;
            background: #1c2920;
            position: absolute;
            top: 0;
            left: 0px;
      }
      #indicator{
            position: absolute;
            top: 0;
            left: 50%;
            height: 60px;
            width: 60px;
      }
      #line{
            position:absolute;
            width:4px;
            height:100%;
            cursor: pointer;
            background: rgb(60,120,255);
            background: -moz-linear-gradient(top,  rgba(60,120,255,1) 0%, rgba(10,80,180,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(60,120,255,1)), color-stop(100%,rgba(10,80,180,1))); /* Chrome,Safari4+ */
      }

      #indicator{
            position: absolute;
            top: 0;
            left: 50%;
            margin-top: -50px;
            margin-left: -50px;
      }

      #triangle{
            background: rgb(60,120,255);
            background: -moz-linear-gradient(top,  rgba(60,120,255,1) 0%, rgba(10,80,180,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(60,120,255,1)), color-stop(100%,rgba(10,80,180,1))); /* Chrome,Safari4+ */
            -webkit-transform: rotate(45deg);
      }

      .col:before {
            position: absolute;
            border-left: 1px white solid;
            content: '';
            height: 5px;
            width: 1px;
            bottom: 0;
            margin-bottom: -4px;
      }

      .col {
            display: inline-block;
            height: 100%;
      }

      #matrix{
            display: table;
            width:6000px;
            height: 100%;
      }

    </style>
  </head>
  <body>
    <div id="timeline">
        <div id="indicator">
            <div id="triangle"></div>
            <div id="line"></div>
        </div>

        <div class="pep">
            <div id="matrix">
            </div>
        </div>
    </div>
  </body>
</html>